(function(){"use strict";var e={7007:function(e,t,n){var i=n(144),o=function(){var e=this,t=e._self._c;return t("div",{class:"pc"===e.isMobile?"pc":"Mobile"},[t("canvas",{ref:"canvas"}),t("div",{staticClass:"text"},[t("div",{staticClass:"top"},e._l(e.list,(function(n,i){return t("div",{key:i,staticClass:"item",class:i===e.activeId?"active":"",on:{click:function(t){return e.topClick(i,n.rotate,n.type)}}},[e._v(" "+e._s(n.title)+" ")])})),0),t("div",{staticClass:"tow"},e._l(e.secondLevel,(function(n,i){return t("div",{key:i,staticClass:"item",class:i===e.activePid?"active":"",on:{click:function(t){return e.towClick(i)}}},[e._v(" "+e._s(n.title)+" ")])})),0),t("div",{staticClass:"imgs"},["文字"===e.showImgList.title?t("div",{staticClass:"text_img"},[t("div",{staticClass:"text_input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"textInput",style:e.color,attrs:{type:"text"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),t("button",{on:{click:e.addText}},[e._v("确定")])]),t("div",["pc"===e.isMobile?t("Sketch",{model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}}):t("Slider",{staticStyle:{width:"100vw"},model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}})],1)]):e._l(e.showImgList.value,(function(n,i){return t("div",{key:i,staticClass:"itemImg",class:i===e.activeImg&&1===e.activePid?"active":""},[n.type?t("div",[e._v(e._s(n.title))]):e._e(),t("img",{attrs:{src:n.url,alt:""},on:{click:function(t){return e.Textures(n.type,n.url,i)}}})])}))],2)]),t("div",{staticClass:"closed",attrs:{id:"gui-container"}}),e.loading?[t("Loading")]:e._e()],2)},a=[],s=(n(541),n(4023)),l=(n(7658),n(9477)),r=n(7836);const c=new l.dpR,d=c.load("./Canvas/Canvas/Side01_Diffuse02.png");d.flipY=!1;const p=c.load("./Canvas/Canvas/Side01_Diffuse02.png");p.flipY=!1;new l.Wid({map:d,normalMap:p});const u=c.load("./Canvas/Canvas/Side02_Diffuse02.png");u.flipY=!1;const f=c.load("./Canvas/Canvas/Side02_Diffuse02.png");f.flipY=!1;new l.Wid({map:u,normalMap:f});const g=c.load("./Canvas/Canvas/ShoeLace_Diffuse02.png");g.flipY=!1;const m=c.load("./Canvas/Canvas/ShoeLace_Normal.png");m.flipY=!1;new l.Wid({map:g,normalMap:m});const v=c.load("./Canvas/Canvas/Tongue_Heel_Diffuse02a.png");v.flipY=!1;const h=c.load("./Canvas/Canvas/Tongue_Heel_Normal.png");h.flipY=!1;new l.Wid({map:v,normalMap:h,side:l.ehD,roughness:1});const C=c.load("./Canvas/Canvas/Inner_Diffuse02.png");C.flipY=!1;const w=c.load("./Canvas/Canvas/Inner_Normal.png");w.flipY=!1;const y=new l.Wid({map:C,normalMap:w}),x=c.load("./Canvas/Canvas/C70_Insole.png");x.flipY=!1;const b=new l.Wid({map:x}),S=c.load("./c6c7d70ad791c100241315636c819b1.png");S.colorSpace=l.KI_;const _=new l.xoR({map:S,normalScale:new l.FM8(1,1),shininess:30,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4}),O=e=>{const t=c.load(e.url);t.colorSpace=l.KI_;const n=new l.xoR({map:t,normalScale:new l.FM8(1,1),shininess:30,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,wireframe:!1});return n};function M(e,t){const n=document.createElement("canvas"),i=n.getContext("2d"),o=30;i.font=`${o}px Arial`;let a=i.measureText(e).width;console.log(a,"textWidth"),a<150&&(a=150),n.width=a,n.height=a/2,i.font="30px Arial",i.fillStyle=t,i.textBaseline="middle",i.textAlign="center",i.fillText(e,n.width/2,n.height/2);const s=n.toDataURL("image/png");return console.log(s),s}function P(e){if("object"!==typeof e||null===e)return e;const t=Object.create(Object.getPrototypeOf(e));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=P(e[n]));return t}var I={img:M,deepCopy:P},T=n(9365),k=n(5357),L=n(7637);const j=n(8250),z=function({canvas:e,loading:t,Width:n,Height:i,isMobile:o}){const a={leftColor:"#ffffff",rightColor:"#ffffff",laceColor:"#ffffff",frontColor:"#ffffff",myNumber:1};var s,c="Side02";const d=new l.xsS;d.background=new l.Ilk("#000000");const p=new l.cPb(75,n/i,.1,1e3);p.position.set(-1.0196908942122942,4.155478018875577,-4.981421579096775),d.add(p);const u=new l.lLk;u.onProgress=function(e,n,i){n===i&&t()};const f=new r.E(u),g=document.getElementById("gui-container"),m=new L.ZP({domElement:g});function v(){const e=new l.Ox3(16777215,.5);e.position.set(0,0,5);const t=new l.Ox3(16777215,.7);t.position.set(0,0,-5);const n=new l.Ox3(16777215,.5);n.position.set(10,0,0);const i=new l.Ox3(16777215,.3);i.position.set(-10,0,0);const o=new l.Ox3(16777215,.3);o.position.set(0,10,0);const a=new l.Ox3(16777215,.3);a.position.set(5,10,0);const s=new l.Ox3(16777215,.3);s.position.set(0,10,5);const r=new l.Ox3(16777215,.3);r.position.set(-5,-10,0),d.add(e,t,n,i,o,a,s,r)}g.addEventListener("click",(e=>{m.toggle(),e.stopPropagation()})),document.body.appendChild(m.domElement),m.add(a,"myNumber",1,20).name("角度").onChange((e=>{z&&K({type:"rotate",value:e})})),m.add(a,"myNumber",0,3).name("大小").onChange((e=>{z&&K({type:"size",value:e})})),f.load("./Chuck70_H_LowPoly(1).glb",(function(e){const t=e.scene;t.traverse((e=>{"Side01"===e.name?m.addColor(a,"rightColor").name("右边").onChange((t=>{e.material.color.set(t)})):"Side02"===e.name?m.addColor(a,"leftColor").name("左边").onChange((t=>{e.material.color.set(t)})):"ShoeLace"===e.name?m.addColor(a,"laceColor").name("鞋带").onChange((t=>{e.material.color.set(t)})):"Tongue"===e.name?m.addColor(a,"frontColor").name("前面").onChange((t=>{e.material.color.set(t)})):"Inner"===e.name?e.material=y:"Insole"===e.name?e.material=b:"RoundLable"===e.name&&e.position.set(-.02,0,0)})),e.scene.rotation.y=-1.7,e.scene.position.x=-.5,e.scene.position.y=-1.3,s=e.scene,d.add(s)}),void 0,(function(e){console.error(e)})),v();const h=new l.CP7({canvas:e});h.setSize(n,i);const C=new T.z(p,h.domElement);function w(e){j.update(e),h.render(d,p),C.update(),requestAnimationFrame(w)}let x,S;C.maxDistance=8,C.minDistance=1,C.update(),w(),window.addEventListener("resize",(function(){"Mobile"===o&&(i=window.innerHeight/2),n=window.innerWidth,p.aspect=n/i,p.updateProjectionMatrix(),h.setSize(n,i)}));let M,P,z,Y=_,D=[],E=!1,N=!0;const W={intersects:!1,point:new l.Pa4,normal:new l.Pa4};function F(e,t){const o=new l.iMs,a=new l.FM8;a.x=e/n*2-1,a.y=-t/i*2+1,o.setFromCamera(a,p);const s=o.intersectObjects($,!0);s.length>0?(W.intersects=!1,z=s[0].object.id,P=d.children.find((e=>e.id===z)),N=!1):(z=void 0,N=!0)}const H=new l.FM8,R=[],$=[];let A;const Z=new l.Pa4;let B=new l.USm;const U=new l.Pa4(10,10,10);function X(){const t=new l.u9r;t.setFromPoints([new l.Pa4,new l.Pa4]),M=new l.x12(t,new l.nls),M.visible=!1,d.add(M),S=new l.iMs,A=new l.Kj0(new l.DvJ(1,1,10),new l.RSm),A.visible=!1,d.add(A);let o=!1;function a(e,t){if(s&&void 0!==x)if(H.x=e/n*2-1,H.y=-t/i*2+1,S.setFromCamera(H,p),S.intersectObject(x,!1,R),R.length>0){C.enabled=!1;const e=R[0].point;A.position.copy(e),W.point.copy(e);const t=R[0].face.normal.clone();t.transformDirection(x.matrixWorld),t.multiplyScalar(10),t.add(R[0].point),W.normal.copy(R[0].face.normal),A.lookAt(t);const n=M.geometry.attributes.position;n.setXYZ(0,e.x,e.y,e.z),n.setXYZ(1,t.x,t.y,t.z),n.needsUpdate=!0,W.intersects=!0,R.length=0}else W.intersects=!1}e.addEventListener("pointerdown",(function(e){x=s.getObjectByName(c),F(e.clientX,e.clientY),o=!0,E=!0})),window.addEventListener("pointermove",(function(e){e.isPrimary&&o&&z&&(a(e.clientX,e.clientY),K({type:"position"})),E=!1})),window.addEventListener("pointerup",(function(e){C.enabled=!0,o=!1;let t=e.clientX,n=e.clientY;a(t,n),W.intersects&&E&&N&&K()}))}X();function K(e){let t;Z.copy(W.point);let n=d.children.findIndex((e=>e.id===z)),i=$.findIndex((e=>e.id===z)),o=D.findIndex((e=>e.id===z));if(-1!==o){B=I.deepCopy(D[o].orientation);let e=D[o].size;U.set(e.x,e.y,e.z),t=D[o].material}else B=new l.USm,B.copy(A.rotation),U.set(1,1,1),t=Y.clone();-1!==n&&e&&-1!==i&&(d.children.splice(n,1),$.splice(i,1),"rotate"===e.type&&(B.z=e.value*Math.PI),e.type,"size"===e.type&&U.set(e.value,e.value,e.value),z&&(x.dele=!0)),x.renderOrder=.1,d.children=d.children.filter((e=>!e.dele));let a=new l.Kj0(new k.k(x,Z,B,U),t);D.push({id:a.id,orientation:I.deepCopy(B),size:I.deepCopy(U),material:t}),-1!==o&&D.splice(o,1),e&&(z=a.id),$.push(a),d.add(a)}function J(e,t,n){const i=[];for(let o=0;o<t.length;o++){const a=new j.Tween(e).to(t[o],n).easing(j.Easing.Quadratic.InOut).onUpdate((e=>{p.position.copy(e)}));i.push(a)}for(let o=0;o<i.length-1;o++)i[o].chain(i[o+1]);i[0].start()}C.addEventListener("change",(()=>{C.object})),this.Rotate=e=>{let{position:t,rotation:n}=e.rotate;const i=C.object.position.clone();J(i,t,1500),c=e.type};const q=e=>{let t=O(e);Y=t};this.setTextures=e=>{e.material?(x=s.getObjectByName(c),x.material=e.material):q(e)},this.setText=(e,t)=>{let n=I.img(e,t),i={url:n};q(i)}};var Y=z,D=function(){var e=this;e._self._c;return e._m(0)},E=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"box_bgc"},[t("div",{staticClass:"container"},[t("span",[e._v("加载中...")]),t("div",{staticClass:"circle"},[t("div",{staticClass:"ring"})])])])}],N={name:"loading"},W=N,F=n(1001),H=(0,F.Z)(W,D,E,!1,null,null,null),R=H.exports;const $=new l.dpR,A=e=>{let t={Side02:{},Tongue:{},ShoeLace:{},Side01:{}};return e.forEach((e=>{e.value[0]&&e.value[0].value.forEach((e=>{const n=$.load(e.map);let i;n.flipY=!1,e.normalMap&&(i=$.load(e.normalMap),i.flipY=!1);const o=new l.Wid({map:n,normalMap:i});let a=e.type[1];t[e.type[0]][a]=o}))})),t};var Z=A,B={name:"App",components:{Loading:R,Photoshop:s.Photoshop,Material:s.Material,Slider:s.Slider},data(){return{size:{width:window.innerWidth,height:window.innerHeight},selectedColor:"#ffffff",from:"Side02",textureObj:{},loading:!0,text:"",list:[{type:"Side02",rotate:{position:[{x:-.15514408412884806,y:.45583742834700647,z:4.416298087252979}]},title:"左",value:[{title:"材质",value:[{title:"原图",type:["Side02","original"],map:"./Canvas/Canvas/Side02_Diffuse02.png",normalMap:"./Canvas/Canvas/Side02_Normal.png",url:"./Canvas/textures/Snipaste_2023-05-10_15-30-42.png"}]},{title:"贴图",value:[{url:"./img/23.png"},{url:"./img/21.png"},{url:"./img/13.png"},{url:"./img/12.png"},{url:"./img/9.png"},{url:"./img/7.png"},{url:"./img/5.png"},{url:"./img/4.png"},{url:"./img/2.png"},{url:"./img/10.png"}]},{title:"文字"}]},{type:"Tongue",rotate:{position:[{x:-4.566183090477527,y:5.8392105923152124,z:-.26348666816662436}]},title:"前面",value:[{title:"材质",value:[{title:"原图",type:["Tongue","original"],map:"./Canvas/Canvas/Tongue_Heel_Diffuse02a.png",normalMap:"./Canvas/Canvas/Tongue_Heel_Normal.png",url:"./Canvas/textures/Snipaste_2023-05-10_15-30-42.png"}]}]},{rotate:{position:[{x:-2.1627944257985083,y:5.313623373208952,z:-.16654404431364367}]},type:"ShoeLace",title:"鞋带",value:[{title:"材质",value:[{title:"原图",type:["ShoeLace","original"],map:"./Canvas/Canvas/ShoeLace_Diffuse02.png",normalMap:"./Canvas/Canvas/ShoeLace_Normal.png",url:"./Canvas/textures/Snipaste_2023-05-10_15-30-42.png"}]}]},{type:"Side01",rotate:{position:[{x:1.3928477225866174,y:.632767367957918,z:-4.170746566638777}]},title:"右",value:[{title:"材质",value:[{title:"原图",type:["Side01","original"],map:"./Canvas/Canvas/Side01_Diffuse02.png",normalMap:"./Canvas/Canvas/Side01_Normal.png",url:"./Canvas/textures/Snipaste_2023-05-10_15-30-42.png"}]},{title:"贴图",value:[{url:"./img/23.png"},{url:"./img/21.png"},{url:"./img/13.png"},{url:"./img/12.png"},{url:"./img/9.png"},{url:"./img/7.png"},{url:"./img/5.png"},{url:"./img/4.png"},{url:"./img/2.png"},{url:"./img/10.png"}]},{title:"文字"}]}],activeId:0,activePid:0,activeImg:0}},computed:{secondLevel(){return this.list[this.activeId].value},showImgList(){return this.list[this.activeId].value[this.activePid]},color(){return{color:this.selectedColor.hex,fontSize:"20px"}},isMobile(){function e(){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;return e.test(navigator.userAgent)}return e()?(this.size.height=window.innerHeight/2,document.body.classList.add("Mobile"),"Mobile"):"pc"}},methods:{isLoading(){this.loading=!1},topClick(e,t,n){if(this.activeId=e,this.activePid=0,"Side02"===n||"Side01"===n){let e={url:this.list[this.activeId].value[1].value[this.activeImg].url};this.$cbyc.setTextures(e)}let i=JSON.parse(JSON.stringify(t)),o={rotate:i,type:n};("Side02"===n&&"Side01"===this.from||"Side01"===n&&"Side02"===this.from)&&o.rotate.position.unshift({x:-.058219784373530606,y:11.180184525848116,z:-.009188291082589443}),this.$cbyc.Rotate(o),this.from=n},towClick(e){this.activePid=e},Textures(e,t,n){this.activeImg=n;let i={};e?i.material=this.textureObj[e[0]][e[1]]:i.url=t,this.$cbyc.setTextures(i)},addText(){this.$cbyc.setText(this.text,this.selectedColor.hex)},loginType(){}},created(){},mounted(){const e=this.$refs.canvas;this.textureObj=Z(this.list),i.ZP.prototype.$cbyc=new Y({canvas:e,loading:this.isLoading,Width:this.size.width,Height:this.size.height,isMobile:this.isMobile});let t={url:this.list[this.activeId].value[1].value[this.activeImg].url};if(this.$cbyc.setTextures(t),console.log(this.isMobile),"Mobile"===this.isMobile){const e=document.querySelector('[aria-expanded="true"]');e.click()}}},U=B,X=(0,F.Z)(U,o,a,!1,null,null,null),K=X.exports;n(2467);i.ZP.config.productionTip=!1,new i.ZP({render:e=>e(K)}).$mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,a){if(!i){var s=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],a=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,o,a]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,s=i[0],l=i[1],r=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var d=r(n)}for(t&&t(i);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},i=self["webpackChunkthree"]=self["webpackChunkthree"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(7007)}));i=n.O(i)})();
//# sourceMappingURL=app.4023022a.js.map